---
# See https://pre-commit.com for more information
# See https://pre-commit.com/hooks.html for more hooks

ci:
  autoupdate_schedule: monthly

# Pin Python version used by Python-based hooks
default_language_version:
  python: python3

repos:
  # ── YAML linting ──────────────────────────────────────────────
  - repo: https://github.com/adrienverge/yamllint
    rev: v1.35.1
    hooks:
      - id: yamllint
        args: [-c, linters/.yamllint.yml, --strict]
        always_run: true

  # ── Markdown linting ──────────────────────────────────────────
  - repo: https://github.com/igorshubovych/markdownlint-cli
    rev: v0.43.0
    hooks:
      - id: markdownlint
        args: [--config, linters/.markdownlint.yml]
        always_run: true

  # ── Dotenv linting ────────────────────────────────────────────
  - repo: https://github.com/wemake-services/dotenv-linter
    rev: 0.5.0
    hooks:
      - id: dotenv-linter
        entry: dotenv-linter lint .env.example
        files: \.env(\..+)?$
        pass_filenames: false
        always_run: true

  # ── Secret detection ──────────────────────────────────────────
  - repo: https://github.com/gitleaks/gitleaks
    rev: v8.22.1
    hooks:
      - id: gitleaks
        args: [--config, linters/.gitleaks.toml]

  # ── Docker Compose validation ─────────────────────────────────
  - repo: local
    hooks:
      - id: docker-compose-check
        name: Validate docker-compose.yml
        entry: docker compose -f docker-compose.yml config --quiet
        language: system
        files: docker-compose\.yml$
        pass_filenames: false
        always_run: true
